# 13.Trieæ ‘çš„åŸºæœ¬å®ç°ä¸ç‰¹æ€§
ç†è§£å­—å…¸æ ‘ä¹‹å‰æˆ‘ä»¬å…ˆæå‡ºä¸‰ä¸ªé—®é¢˜ï¼Œåé¢æˆ‘ä»¬å†æ¥å›ç­”ï¼š
1. å­—å…¸æ ‘çš„æ•°æ®ç»“æ„
2. å­—å…¸æ ‘çš„æ ¸å¿ƒæ€æƒ³
3. å­—å…¸æ ‘çš„åŸºæœ¬æ€§è´¨

åœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿå…ˆå›å¿†ä¸€ä¸‹**æ ‘**ï¼Œæ ‘æœ¬èº«å®šä¹‰æ¯”è¾ƒç®€å•ï¼Œå¦‚ä¸‹å›¾ï¼š
![](https://imgkr2.cn-bj.ufileos.com/b2492a5c-8a3a-4714-9bdf-c308f4ef7223.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=f%252BWEMYf2jKvdg05oMeUq8j2H0H8%253D&Expires=1596525987)

å¦‚æœä½ çœ‹åˆ°ä¸Šå›¾è¿™æ ·çš„ä¸€ä¸ªå±‚çº§ï¼Œä½ åº”è¯¥é©¬ä¸Šä¼šæƒ³åˆ°æŒ‰å±‚æ¬¡æ¥æ‰“å°ä¸€é¢—äºŒå‰æ ‘ï¼Œè¿™ä¸ªé¢˜ç›®æ˜¯éå¸¸é«˜é¢‘çš„é¢˜ç›®ï¼š
[102. äºŒå‰æ ‘çš„å±‚åºéå†](https://leetcode-cn.com/problems/binary-tree-level-order-traversal/)ã€‚
é‚£ä¹ˆè¿™é‡Œä½ ä¸è®°å¾—è¿™ä¸ªé¢˜ç›®æˆ–è€…å¯¹å†™è¿™ä¸ªä»£ç çš„è¯è¿˜æœ‰ä¸€ç‚¹æ¨¡ç³Šï¼Œä½ å¯ä»¥å»å†ç»ƒä¹ ä¸€éã€‚

åŒæ—¶æ·±åº¦ä¼˜å…ˆæœç´¢å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢ä½ åº”è¯¥ä¹Ÿéœ€è¦æŒæ¡ã€‚è¿™é‡Œå¯ä»¥çœ‹ä¸€ä¸‹æˆ‘ä¹‹å‰çš„ä¸€éæ–‡ç« ï¼š[æ·±åº¦ä¼˜å…ˆæœç´¢å’Œå¹¿åº¦ä¼˜å…ˆæœç´¢](https://juejin.im/post/6850418113256062989)

**äºŒå‰æœç´¢æ ‘**
ä¸€æåˆ°äºŒå‰æœç´¢æ ‘ä½ å°±åº”è¯¥æƒ³åˆ°æ˜¯å­æ ‘çš„å…³ç³»ï¼Œå¹¶ä¸æ˜¯å„¿å­å’Œçˆ¶äº²çš„å…³ç³»ã€‚é‚£ä¹ˆå®ƒçš„å®šä¹‰å°±è¯´ï¼šä»»ä½•ä¸€ä¸ªç»“ç‚¹ï¼Œæ‰€æœ‰çš„å·¦å­æ ‘å€¼éƒ½æ¯”æ ¹èŠ‚ç‚¹å°ï¼Œæ‰€æœ‰çš„å³å­æ ‘å€¼éƒ½æ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œä¸”å¯¹äºå®ƒçš„ä»»ä½•å­æ ‘åŒæ ·åœ°ä»¥æ­¤ç±»æ¨ã€‚å¯¹äºä»»ä½•å­æ ‘éƒ½æ»¡è¶³è¿™æ ·çš„ç‰¹æ€§ï¼Œè¿™ä¸ªå°±æ˜¯æ‰€è°“çš„äºŒå‰æœç´¢æ ‘ã€‚

å¦å¤–ä¸€ä¸ªç‰¹æ€§ï¼š**äºŒå‰æœç´¢æ ‘æ˜¯ä¸€ä¸ªå‡åºçš„åºåˆ—**ï¼Œå¦‚æœæ˜¯ä¸­åºéå†çš„è¯ï¼ˆå·¦-æ ¹-å³ï¼‰ã€‚

![](https://imgkr2.cn-bj.ufileos.com/a1b1f02e-db1a-43b4-b08a-2db9f0692f37.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=kmOLyvYCIOr2OUf2Tr0%252BbVrOKjI%253D&Expires=1596526452)

é‚£ä¹ˆè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œåœ¨ç°å®ä¸­ç‰¹åˆ«å¸¸è§ï¼Œä½†æ˜¯åœ¨äºŒå‰æœç´¢æ ‘æ¥è¿›è¡Œå­˜å‚¨çš„è¯å¹¶ä¸æ˜¯ç‰¹åˆ«å¥½è§£å†³è¿™æ ·çš„ä¸€ä¸ªå®é™…é—®é¢˜ã€‚å°±æ˜¯åœ¨æœç´¢çš„æ—¶å€™ï¼Œå½“ä½ æ‰“æ¥ä¸€ä¸ªå­—æ¯çš„å‰ç¼€æˆ–è€…ä½ ä¸­æ–‡ä¹Ÿç±»ä¼¼ï¼Œæ¯”å¦‚è¯´ä½ æ‰“æ¥ä¸€ä¸ªå‘¨æ°ï¼Œä¸€èˆ¬äººå¯èƒ½ä¼šè§‰å¾—æ˜¯ä¼¦ï¼Œå°±æ˜¯å‘¨æ°ä¼¦ã€‚åŒç†è‹±æ–‡çš„è¯å°±æ˜¯youçš„è¯å°±æœ‰è¿™ä¹ˆå¤šå¯ä»¥æ„Ÿåº”å‡ºæ¥çš„ï¼Œåƒè¿™ç§æ‰€è°“çš„è¯é¢‘çš„æ„Ÿåº”æˆ–è€…æ˜¯ç”±å‰ç¼€æ¥æ¨åé¢å¯èƒ½çš„è¯è¯­ã€‚é‚£ä¹ˆå®ƒåº”è¯¥ç”¨æ€æ ·çš„æ•°æ®ç»“æ„æ¥è¡¨ç¤ºï¼Ÿ
![](https://imgkr2.cn-bj.ufileos.com/35f8518d-7d03-4dc5-b4c1-a916bab04afd.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=ubywf7pYVN2vsszA2P%252FeLDPfsE8%253D&Expires=1596531488)

## å­—å…¸æ ‘ï¼ˆTrieï¼‰

### 1. åŸºæœ¬ç»“æ„
**å­—å…¸æ ‘**ï¼Œå³ Tire æ ‘ï¼Œåˆç§°å•è¯æŸ¥æ‰¾æ ‘æˆ–é”®æ ‘ï¼Œæ˜¯ä¸€ç§æ ‘å‹ç»“æ„ã€‚å…¸å‹åº”ç”¨æ˜¯ç”¨äºç»Ÿè®¡å’Œæ’åºå¤§é‡çš„å­—ç¬¦ä¸²ï¼ˆä½†ä¸ä»…é™äºå­—ç¬¦ä¸²ï¼‰ï¼Œæ‰€ä»¥ç»å¸¸è¢«æœç´¢å¼•æ“ç³»ç»Ÿç”¨äºæ–‡æœ¬è¯é¢‘ç»Ÿè®¡ã€‚

å®ƒçš„ä¼˜ç‚¹æ˜¯ï¼šæœ€å¤§é™åº¦åœ°å‡å°‘æ— è°“çš„å­—ç¬¦ä¸²æ¯”è¾ƒï¼ŒæŸ¥è¯¢æ•ˆç‡æ¯”å“ˆå¸Œé«˜ã€‚**å…¶æ ¸å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨å…¬å…±å‰ç¼€æ¥å‡å°‘æŸ¥è¯¢å®é™…**ã€‚
![](https://imgkr2.cn-bj.ufileos.com/a5e6e551-bbf1-4e20-a4f2-2774c3aecbef.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=Ug8g6rreWM%252BLK0huMX676NBLTGI%253D&Expires=1596532132)

### 2. åŸºæœ¬æ€§è´¨
1. ç»“ç‚¹æœ¬èº«ä¸å­˜å®Œæ•´å•è¯ï¼›
2. ä»æ ¹ç»“ç‚¹åˆ°æŸä¸€ç»“ç‚¹ï¼Œè·¯å¾„ä¸Šç»è¿‡çš„å­—ç¬¦è¿æ¥èµ·æ¥ï¼Œä¸ºè¯¥ç»“ç‚¹å¯¹åº”çš„å­—ç¬¦ä¸²ï¼›
3. æ¯ä¸ªç»“ç‚¹çš„æ‰€æœ‰å­ç»“ç‚¹è·¯å¾„ä»£è¡¨çš„å­—ç¬¦éƒ½ä¸ç›¸åŒã€‚

**ç»“ç‚¹å­˜å‚¨é¢å¤–ä¿¡æ¯**

![](https://imgkr2.cn-bj.ufileos.com/cbea05df-8c73-4577-9d0e-452cb49f3c0a.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=P80P5DrAbzY6OqOcO5CLrcMTrbA%253D&Expires=1596532583)

å¾ˆå¤šæ—¶å€™æˆ‘ä»¬è¿˜è¦ç»Ÿè®¡é¢‘æ¬¡ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå°±ä¼šåœ¨è¿™é‡ŒåŠ ä¸€ä¸ªæ•°å­—ï¼Œæ‰€ä»¥è¿™ä¸ªæ•°å­—å°±è¡¨ç¤ºç›¸åº”åˆ°è¿™ä¸ªç»“ç‚¹æ‰€ä»£è¡¨çš„å•è¯å®ƒçš„ç»Ÿè®¡çš„è®¡æ•°å°±æ”¾åœ¨è¿™ä¸ªåœ°æ–¹ï¼Œå½“ç„¶æ¥å®ƒçš„ç»“ç‚¹ä¸Šå¯ä»¥å­˜å…¶ä»–çš„é¢å¤–çš„ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªå›¾ä¸Šåªæ˜¯ç”¨æ•°å­—æ¥ä¸¾ä¾‹ã€‚è¿™é‡Œæ•°å­—å°±æ˜¯è¿™ä¸ªå•è¯å‡ºç°çš„ç»Ÿè®¡é¢‘æ¬¡ã€‚è€ŒæŒ‰ç…§ç»Ÿè®¡é¢‘æ¬¡ï¼Œæˆ‘ä»¬ååºå°±å¯ä»¥ç»™ç”¨æˆ·åšç›¸åº”çš„æ¨èã€‚

**ç»“ç‚¹çš„å†…éƒ¨å®ç°**

æ¯ä¸ªç»“ç‚¹çš„å¦‚æœæ˜¯è‹±æ–‡çš„è¯ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®å®ƒå°±ä¼šå­˜åˆ°ä¸‹ä¸€ä¸ªç»“ç‚¹å»çš„è¯ï¼ŒæŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹çš„ä¸åŒçš„æŒ‡é’ˆï¼Œè¿™é‡Œå®ƒå­˜å‚¨å°±ä¸å†æ˜¯ç”¨left å’Œ right æ¥è¡¨ç¤ºå·¦å³ç»“ç‚¹æ¥ï¼Œå®ƒå°±ç›´æ¥ç”¨ç›¸åº”çš„å­—ç¬¦æ¥æŒ‡å‘ä¸‹ä¸€ä¸ªç»“ç‚¹ã€‚åŒæ—¶é™¤äº†å°å†™çš„ `abcdefg...` è¿˜æœ‰å¤§å†™çš„ `ABCDEFG...` ï¼ŒåŒæ—¶å¦‚æœè¿˜å­˜åœ¨ä¸€äº›ç‰¹æ®Šç¬¦åˆçš„è¯ï¼Œä¹Ÿå¯ä»¥æ”¾è¿™é‡Œï¼Œæ‰€ä»¥å¦‚æœæ˜¯ç®€å•å•è¯çš„è¯ï¼ŒåŒæ—¶ä¸åˆ†å¤§å°å†™ï¼Œä½ å¯ä»¥è®¤ä¸ºè¿™é‡Œæ˜¯26ä¸ªåˆ†å‰ï¼Œå°±ä» a åˆ†åˆ° z 26ä¸ªåˆ†å‰å‡ºå»ï¼Œå½“ç„¶ä½ å¦‚æœè¦åŒ…å«å¤§å°å†™æˆ–è€…åŒ…æ‹¬å…¶ä»–çš„è¯å°±æ›´å¤šï¼ŒåŒæ—¶å¦‚æœæ˜¯æ•´ä¸ªå­—ç¬¦ä¸²çš„è¯ï¼Œå®ƒçš„ `ASCII` åŸŸæ˜¯255ï¼Œæ‰€ä»¥æ˜¯255åˆ†å‰ã€‚ä¸€èˆ¬æ¥è¯´ä½ å¯ä»¥è®¤ä¸ºæ˜¯26åˆ†å‰çš„ä¸€ä¸ªå¤šå‰æ ‘ã€‚

![](https://imgkr2.cn-bj.ufileos.com/f6a6dff1-f547-435a-a14d-47dca9e0cfe1.png?UCloudPublicKey=TOKEN_8d8b72be-579a-4e83-bfd0-5f6ce1546f13&Signature=ByJrpOmwbU92B2HH%252F72BiqqaFzM%253D&Expires=1596533390)

### 3. æ ¸å¿ƒæ€æƒ³
- Trie æ ‘çš„æ ¸å¿ƒå®ç°æ˜¯ç©ºé—´æ¢æ—¶é—´ã€‚
- åˆ©ç”¨å­—ç¬¦ä¸²çš„å…¬å…±å‰ç¼€æ¥é™ä½æŸ¥è¯¢æ—¶é—´çš„å¼€é”€ä»¥è¾¾åˆ°æé«˜æ•ˆç‡çš„ç›®çš„ã€‚


## å®æˆ˜é¢˜ç›®
[208. å®ç° Trie (å‰ç¼€æ ‘)](https://leetcode-cn.com/problems/implement-trie-prefix-tree/%23/description/)

[212. å•è¯æœç´¢ II](https://leetcode-cn.com/problems/word-search-ii/)

### 208. å®ç° Trie (å‰ç¼€æ ‘)
**Trie æ ‘ä»£ç æ¨¡æ¿**
```
//Java
class Trie {
    private boolean isEnd;
    private Trie[] next;
    /** Initialize your data structure here. */
    public Trie() {
        isEnd = false;
        next = new Trie[26];
    }
    
    /** Inserts a word into the trie. */
    public void insert(String word) {
        if (word == null || word.length() == 0) return;
        Trie curr = this;
        char[] words = word.toCharArray();
        for (int i = 0;i < words.length;i++) {
            int n = words[i] - 'a';
            if (curr.next[n] == null) curr.next[n] = new Trie();
            curr = curr.next[n];
        }
        curr.isEnd = true;
    }
    
    /** Returns if the word is in the trie. */
    public boolean search(String word) {
        Trie node = searchPrefix(word);
        return node != null && node.isEnd;
    }
    
    /** Returns if there is any word in the trie that starts with the given prefix. */
    public boolean startsWith(String prefix) {
        Trie node = searchPrefix(prefix);
        return node != null;
    }

    private Trie searchPrefix(String word) {
        Trie node = this;
        char[] words = word.toCharArray();
        for (int i = 0;i < words.length;i++) {
            node = node.next[words[i] - 'a'];
            if (node == null) return null;
        }
        return node;
    }
}
```
```
# Python 
class Trie(object):
  
	def __init__(self): 
		self.root = {} 
		self.end_of_word = "#" 
 
	def insert(self, word): 
		node = self.root 
		for char in word: 
			node = node.setdefault(char, {}) 
		node[self.end_of_word] = self.end_of_word 
 
	def search(self, word): 
		node = self.root 
		for char in word: 
			if char not in node: 
				return False 
			node = node[char] 
		return self.end_of_word in node 
 
	def startsWith(self, prefix): 
		node = self.root 
		for char in prefix: 
			if char not in node: 
				return False 
			node = node[char] 
		return True
```
```
//C/C++
class Trie {
    struct TrieNode {
        map<char, TrieNode*>child_table;
        int end;
        TrieNode(): end(0) {}
    };
        
public:
    /** Initialize your data structure here. */
    Trie() {
        root = new TrieNode();
    }
    
    /** Inserts a word into the trie. */
    void insert(string word) {
        TrieNode *curr = root;
        for (int i = 0; i < word.size(); i++) {
            if (curr->child_table.count(word[i]) == 0)
                curr->child_table[word[i]] = new TrieNode();
                
            curr = curr->child_table[word[i]];                
        }
        curr->end = 1;
    }
    
    /** Returns if the word is in the trie. */
    bool search(string word) {
        return find(word, 1);
    }
    
    /** Returns if there is any word in the trie that starts with the given prefix. */
    bool startsWith(string prefix) {
        return find(prefix, 0);
    }
private:
    TrieNode* root;
    bool find(string s, int exact_match) {
        TrieNode *curr = root;
        for (int i = 0; i < s.size(); i++) {
            if (curr->child_table.count(s[i]) == 0)
                return false;
            else
                curr = curr->child_table[s[i]];
        }
        
        if (exact_match)
            return (curr->end) ? true : false;
        else
            return true;
    }
};
```
```
// JavaScript
class Trie {
  constructor() {
    this.root = {};
    this.endOfWord = "$";
  }

  insert(word) {
    let node = this.root;
    for (let ch of word) {
      node[ch] = node[ch] || {};
      node = node[ch];
    }
    node[this.endOfWord] = this.endOfWord;
  }

  search(word) {
    let node = this.root;
    for (let ch of word) {
      if (!node[ch]) return false;
      node = node[ch];
    }
    return node[this.endOfWord] === this.endOfWord;
  }

  startsWith(word) {
    let node = this.root;
    for (let ch of word) {
      if (!node[ch]) return false;
      node = node[ch];
    }
    return true;
  }
}


let trie = new Trie();
console.log(trie.insert("apple"));
console.log(trie.search("apple")); // è¿”å› true
console.log(trie.search("app")); // è¿”å› false
console.log(trie.startsWith("app")); // è¿”å› true
console.log(trie.insert("app"));
console.log(trie.search("app")); // è¿”å› true
```

### 212. å•è¯æœç´¢ II
```
class Solution {
    public List<String> findWords(char[][] board, String[] words) {
        // æ„å»ºå­—å…¸æ ‘
        Trie trie = new Trie();
        // æ’å…¥æ•°æ®
        for (String word : words) {
            trie.insert(word);
        }

        // æ„å»ºç»“æœé›†å®¹å™¨
        List<String> result = new LinkedList<>();
        // çŸ©é˜µè¡Œæ•°
        int m = board.length;
        // çŸ©é˜µåˆ—æ•°
        int n = board[0].length;
        // å­˜å‚¨è¯¥ç»“ç‚¹æ˜¯å¦è®¿é—®
        boolean[][] visited = new boolean[m][n];
        // éå†æ•´ä¸ªäºŒç»´æ•°ç»„
        for (int i = 0; i < m; i++) {
            for (int j = 0; j < n; j++) {
                find(board, visited, i, j, m, n, result, trie);
            }
        }
        return result;
    }

    private void find(char[][] board, boolean[][] visited, int i, int j, int m, int n, List<String> result, Trie cur) {
        // è¾¹ç•Œåˆ¤æ–­ä»¥åŠæ˜¯å¦å·²ç»è®¿é—®åˆ¤æ–­
        if (i < 0 || i >= m || j < 0 || j >=n || visited[i][j]) {
            return;
        }
        // è·å–å­ç»“ç‚¹çŠ¶æ€ï¼Œåˆ¤æ–­å…¶æ˜¯å¦åˆå­ç»“ç‚¹
        cur = cur.next[board[i][j] - 'a'];
        if (cur == null) return;

        // ä¿®æ”¹ç»“ç‚¹çŠ¶æ€ï¼Œé˜²æ­¢é‡å¤è®¿é—®
        visited[i][j] = true;
        // æ‰¾åˆ°å•è¯åŠ å…¥
        if (cur.isEnd) {
            result.add(cur.val);
            // æ‰¾åˆ°å•è¯åï¼Œä¿®æ”¹å­—å…¸æ ‘å†…å¶å­ç»“ç‚¹çŠ¶æ€ä¸ºfalseï¼Œé˜²æ­¢å‡ºç°é‡å¤å•è¯
            cur.isEnd = false;
        }
        find(board, visited, i + 1, j, m, n, result, cur);
        find(board, visited, i - 1, j, m, n, result, cur);
        find(board, visited, i, j + 1, m, n, result, cur);
        find(board, visited, i, j - 1, m, n, result, cur);
        // æœ€åä¿®æ”¹ç»“ç‚¹çŠ¶æ€ä¸ºæœªè®¿é—®çŠ¶æ€
        visited[i][j] = false;
    }

    class Trie {
        // è¡¨ç¤ºæ˜¯å¦æœ€åå¶å­ç»“ç‚¹
        private boolean isEnd;
        // è¡¨ç¤ºå­—èŠ‚çš„
        private Trie[] next;
        // å­˜å‚¨æœ€åç»“ç‚¹çš„å­—ç¬¦ä¸²
        private String val;

        public Trie() {
            isEnd = false;
            next = new Trie[26];
        }
        
        public void insert(String word) {
            if (word == null || word.length() == 0) return;
            Trie curr = this;
            char[] words = word.toCharArray();
            for (int i = 0; i < words.length; i++) {
                // åˆ¤æ–­æ˜¯å¦å­˜åœ¨è¯¥å­—ç¬¦çš„ç»“ç‚¹ï¼Œä¸å­˜åœ¨åˆ™åˆ›å»º
                int n = words[i] - 'a';
                if (curr.next[n] == null) {
                    curr.next[n] = new Trie();
                }
                curr = curr.next[n];
            }
            // éå†ç»“æŸåï¼Œä¿®æ”¹å¶å­ç»“ç‚¹çš„çŠ¶æ€ï¼Œå¹¶å­˜å‚¨å­—ç¬¦ä¸²
            curr.isEnd = true;
            curr.val = word;
        }

        public boolean search(String word) {
            Trie node = searchPrefix(word);
            return node != null && node.isEnd;
        }

        public boolean startsWith(String prefix) {
            Trie node = searchPrefix(prefix);
            return node != null;
        }

        private Trie searchPrefix(String word) {
            Trie node = this;
            char[] words = word.toCharArray();
            for (int i = 0; i < words.length; i++) {
                node = node.next[words[i] - 'a'];
                if (node == null) return null;
            }
            return node;
        }
    }
}
```


![](https://imgkr.cn-bj.ufileos.com/dcc82078-1089-4548-b6b6-2a96dfda63c7.jpg)



    éƒ¨åˆ†å›¾ç‰‡æ¥æºäºç½‘ç»œï¼Œç‰ˆæƒå½’åŸä½œè€…ï¼Œä¾µåˆ ã€‚

    ğŸ‘‡ç‚¹å‡»é˜…è¯»åŸæ–‡ï¼ŒæŸ¥çœ‹å¾€æœŸå†…å®¹ï¼

                          å¿«ç•™è¨€ğŸ‘‡å’Œæˆ‘äº’åŠ¨å§ï½